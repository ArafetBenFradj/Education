<app-banner [descriptionBanner]="title" [descriptionText]="text"></app-banner>
<section class="section bg-gray">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <h2 class="section-title">Search Reviews</h2>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-7 mb-4 mb-lg-0">
        <form [formGroup]="searchForm" class="row">
          <div class="col-12">
            <input
              type="text"
              class="form-control mb-3"
              formControlName="PhoneChild"
              name="Phone"
              placeholder="Child Phone Numer "
            />
          </div>
          <div
            class="col-sm-12"
            style="color: red"
            *ngIf="
              searchForm.controls['PhoneChild'].invalid &&
              (searchForm.controls['PhoneChild'].dirty ||
                searchForm.controls['PhoneChild'].touched)
            "
          >
            <div *ngIf="searchForm.controls['PhoneChild'].errors.required">
              Phone Number is required
            </div>
            <div *ngIf="searchForm.controls['PhoneChild'].errors.pattern">
              Phone Number should have at least 8 number
            </div>
          </div>
          <div class="col-12">
            <button
              type="submit"
              class="btn btn-primary"
              [disabled]="searchForm.invalid"
              (click)="searchEvaluations()"
            >
              Search
            </button>
          </div>
          <div style="margin-top: 3%;margin-left: 2%;" *ngIf="errorMessage" class="alert alert-danger">
            {{ errorMessage }}
          </div>
        </form>
       
      </div>
      <div class="table-responsive" style="margin-top: 5%;" *ngIf="showInput">
        <h3 class="mb-xl-4 mb-lg-3 mb-4">Reviews For Courses</h3>
        <table class="table"> 
            <thead>
              <tr>
                <th scope="col">Teacher Name</th>
                <th scope="col">Course Name</th>
                <th scope="col">Evaluation</th>
              </tr>
            </thead>
            <tbody>
              <tr class="table-warning" *ngFor="let evaluation of evaluations">
                <td>{{evaluation.idTeacher.firstName}} {{evaluation.idTeacher.lastName}}</td>
                <td>{{evaluation.idCourse.name}}</td>
                <td>{{evaluation.evaluation}}</td>
              </tr>
             
            </tbody>
        </table>
       <h3 class="mb-xl-4 mb-lg-3 mb-4">Global Review From Teachers</h3>
       <table class="table"> 
        <thead>
          <tr>
            <th scope="col">Teacher Name</th>
            <th scope="col">Evaluation</th>
          </tr>
        </thead>
        <tbody>
          <tr class="table-warning" *ngFor="let evaluation of globalEvaluations">
            <td>{{evaluation.idTeacher.firstName}} {{evaluation.idTeacher.lastName}}</td>
            <td>{{evaluation.evaluation}}</td>
          </tr>
        </tbody>
    </table>
       <h3 class="mb-xl-4 mb-lg-3 mb-4">Notes From Teachers</h3>
       <table class="table"> 
        <thead>
          <tr>
            <th scope="col">Teacher Name</th>
            <th scope="col">Course Name</th>
            <th scope="col">Note</th>
            <th scope="col">Mention</th>
          </tr>
        </thead>
        <tbody>
          <tr class="table-warning" *ngFor="let note of notes">
            <td>{{note.idTeacher.firstName}} {{note.idTeacher.lastName}}</td>
            <td>{{note.idCourse.name}}</td>
            <td>{{note.note}}</td>
            <td>{{note.mention}}</td>
          </tr>
         
        </tbody>
    </table>
    <div class="col-12" class="text-center">
        <button
          type="submit"
          class="btn btn-primary"
          (click)="onValidateClose()"
        >
          Close
        </button>
      </div>
      </div>
    </div>
  </div>
</section>
